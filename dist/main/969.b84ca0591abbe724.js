"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[969],{63969:(X,k,l)=>{l.r(k),l.d(k,{CLIENT_MISSION_ROUTE:()=>Tt});var u=l(59115),M=l(33726),v=l(84412),C=l(57786),b=l(96354),f=l(45024),_=l(14619),S=l(35780),h=l(60177),F=l(9183),$=l(86600),A=l(67949),I=l(82765),d=l(9159),R=l(99213),g=l(88834),N=l(14823),H=l(8173),j=l(96695),E=l(2042),t=l(54438),G=l(21626),V=l(2490);let x=(()=>{class a extends _.U{constructor(e,s){super(),this.http=e,this.cookieService=s,this.baseUrl="https://backdeploy-7y83.onrender.com/missions",this.isTblLoading=!0,this.dataChange=new v.t([])}assignUserToMission(e,s){return this.http.post(`${this.baseUrl}/assign-user`,{missionId:e,userId:s})}getDialogData(){return this.dialogData}createMission(e){return this.http.post(`${this.baseUrl}/create`,e)}updateDataChange(e){this.dataChange.next(e)}getDataChange(){return this.dataChange.asObservable()}get data(){return this.dataChange.value}addMission(e){this.dialogData=e,console.log(this.getTokenFromCookie())}deleteMission(e){return this.http.delete(`${this.baseUrl}/${e}`)}updateMission(e,s){return this.http.put(`${this.baseUrl}/${e}`,s)}deleteMultipleMissions(e){return e.map(n=>n?.toString()),this.http.delete(`${this.baseUrl}/delete-multiple`)}getAllMissions(){const e=this.getTokenFromCookie();if(console.log(e),!e)throw new Error("ID du client introuvable dans le cookie.");this.subs.sink=this.http.get(`${this.baseUrl}/client/${e}`).subscribe({next:s=>{this.isTblLoading=!1,this.dataChange.next(s)},error:s=>{this.isTblLoading=!1,console.log(s.name+" "+s.message)}})}createAndAssignMission(e){const s=this.getTokenFromCookie();return this.http.post(`${this.baseUrl}/${s}`,e)}getTokenFromCookie(){if(this.cookieService.check("token")){let e=this.cookieService.get("token");return console.log(e),e}return null}static#t=this.\u0275fac=function(s){return new(s||a)(t.KVO(G.Qq),t.KVO(V.O))};static#e=this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var c=l(89417),y=l(25084),p=l(75351),D=l(32102),U=l(99631);function O(a,o){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Title is required"),t.k0s())}function P(a,o){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Description is required"),t.k0s())}function L(a,o){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Start Date is required"),t.k0s())}function J(a,o){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"End Date is required"),t.k0s())}let B=(()=>{class a{constructor(e,s,i,n){this.dialogRef=e,this.data=s,this.formBuilder=i,this.missionService=n,this.action=s.action,"edit"===this.action&&s.id?(this.dialogTitle=s.mission.title,this.mission=s.mission):(this.dialogTitle="New Mission",this.mission={title:"",description:"",startDate:"",endDate:""}),this.missionForm=this.createMissionForm()}createMissionForm(){return this.formBuilder.group({title:[this.mission.title,c.k0.required],description:[this.mission.description,c.k0.required],startDate:[this.mission.startDate,c.k0.required],endDate:[this.mission.endDate,c.k0.required]})}submit(){if(this.missionForm.valid){const e={title:this.missionForm.value.title,description:this.missionForm.value.description,startDate:this.missionForm.value.startDate,endDate:this.missionForm.value.endDate};"edit"===this.action?this.missionService.updateMission(this.data.id,e).subscribe():this.missionService.createAndAssignMission(e).subscribe(),this.dialogRef.close()}}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(s){return new(s||a)(t.rXU(p.CP),t.rXU(p.Vh),t.rXU(c.ok),t.rXU(x))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-form-dialog"]],standalone:!0,features:[t.aNF],decls:47,vars:12,consts:[["startDatePicker",""],["endDatePicker",""],[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"register-form","m-4",3,"formGroup"],[1,"row"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["matInput","","formControlName","description","required",""],["matInput","","formControlName","startDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","endDate","required","",3,"matDatepicker"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["align","end",1,"example-button-row"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(s,i){if(1&s){const n=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2",6),t.EFF(5),t.k0s()()()(),t.j41(6,"div",7)(7,"form",8)(8,"div",9)(9,"div",10)(10,"mat-form-field",11)(11,"mat-label"),t.EFF(12,"Title"),t.k0s(),t.nrm(13,"input",12),t.DNE(14,O,2,0,"mat-error",13),t.k0s()(),t.j41(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t.EFF(18,"Description"),t.k0s(),t.nrm(19,"textarea",14),t.DNE(20,P,2,0,"mat-error",13),t.k0s()()(),t.j41(21,"div",9)(22,"div",10)(23,"mat-form-field",11)(24,"mat-label"),t.EFF(25,"Start Date"),t.k0s(),t.nrm(26,"input",15)(27,"mat-datepicker-toggle",16)(28,"mat-datepicker",null,0),t.DNE(30,L,2,0,"mat-error",13),t.k0s()(),t.j41(31,"div",10)(32,"mat-form-field",11)(33,"mat-label"),t.EFF(34,"End Date"),t.k0s(),t.nrm(35,"input",17)(36,"mat-datepicker-toggle",16)(37,"mat-datepicker",null,1),t.DNE(39,J,2,0,"mat-error",13),t.k0s()()(),t.j41(40,"div",9)(41,"div",18)(42,"div",19)(43,"button",20),t.bIt("click",function(){return t.eBV(n),t.Njj(i.closeDialog())}),t.EFF(44,"Cancel"),t.k0s(),t.j41(45,"button",21),t.bIt("click",function(){return t.eBV(n),t.Njj(i.submit())}),t.EFF(46),t.k0s()()()()()()()}if(2&s){let n,r,m,T;const w=t.sdS(29),Y=t.sdS(38);t.R7$(5),t.JRh(i.dialogTitle),t.R7$(2),t.Y8G("formGroup",i.missionForm),t.R7$(7),t.Y8G("ngIf",null==(n=i.missionForm.get("title"))?null:n.hasError("required")),t.R7$(6),t.Y8G("ngIf",null==(r=i.missionForm.get("description"))?null:r.hasError("required")),t.R7$(6),t.Y8G("matDatepicker",w),t.R7$(),t.Y8G("for",w),t.R7$(3),t.Y8G("ngIf",null==(m=i.missionForm.get("startDate"))?null:m.hasError("required")),t.R7$(5),t.Y8G("matDatepicker",Y),t.R7$(),t.Y8G("for",Y),t.R7$(3),t.Y8G("ngIf",null==(T=i.missionForm.get("endDate"))?null:T.hasError("required")),t.R7$(6),t.Y8G("disabled",!i.missionForm.valid),t.R7$(),t.SpI(" ","edit"===i.action?"Update":"Add"," ")}},dependencies:[g.Hl,g.$z,R.m_,p.Yi,c.YN,c.qT,c.me,c.BC,c.cb,c.YS,c.X1,c.j4,c.JD,D.RG,D.rl,D.nJ,D.TL,D.yw,U.fS,U.fg,y.X6,y.Vh,y.bZ,y.bU,h.MD,h.bT]})}return a})();var z=l(10467);let Q=(()=>{class a{constructor(e,s,i){this.dialogRef=e,this.data=s,this.MissionService=i}onNoClick(){this.dialogRef.close()}confirmDelete(){var e=this;return(0,z.A)(function*(){console.log(e.data.id),yield e.MissionService.deleteMission(e.data.id).subscribe()})()}static#t=this.\u0275fac=function(s){return new(s||a)(t.rXU(p.CP),t.rXU(p.Vh),t.rXU(x))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-delete"]],standalone:!0,features:[t.aNF],decls:30,vars:5,consts:[[1,"container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"clearfix"],[1,"font-weight-bold"],["mat-dialog-actions","",1,"mb-1"],["mat-flat-button","","color","warn",3,"click","mat-dialog-close"],["mat-flat-button","","tabindex","-1",3,"click"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2,"Are you sure?"),t.k0s(),t.j41(3,"div",2)(4,"ul",3)(5,"li")(6,"p")(7,"span",4),t.EFF(8," Title: "),t.k0s(),t.EFF(9),t.k0s()(),t.j41(10,"li")(11,"p")(12,"span",4),t.EFF(13," Description: "),t.k0s(),t.EFF(14),t.k0s()(),t.j41(15,"li")(16,"p")(17,"span",4),t.EFF(18,"StartDate: "),t.k0s(),t.EFF(19),t.k0s()(),t.j41(20,"li")(21,"p")(22,"span",4),t.EFF(23,"EndDATE: "),t.k0s(),t.EFF(24),t.k0s()()()(),t.j41(25,"div",5)(26,"button",6),t.bIt("click",function(){return i.confirmDelete()}),t.EFF(27," Delete "),t.k0s(),t.j41(28,"button",7),t.bIt("click",function(){return i.onNoClick()}),t.EFF(29,"Cancel"),t.k0s()()()),2&s&&(t.R7$(9),t.JRh(i.data.title),t.R7$(5),t.JRh(i.data.description),t.R7$(5),t.SpI("",i.data.startdate," "),t.R7$(5),t.SpI("",i.data.enddate," "),t.R7$(2),t.Y8G("mat-dialog-close",1))},dependencies:[p.BI,p.Yi,p.E7,g.Hl,g.$z,p.tx]})}return a})();var Z=l(95416),K=l(74710);const W=["filter"],q=()=>["Missions"],tt=()=>[5,10,25,100];function et(a,o){if(1&a){const e=t.RV6();t.j41(0,"mat-header-cell")(1,"mat-checkbox",48),t.bIt("change",function(i){t.eBV(e);const n=t.XpG();return t.Njj(i?n.masterToggle():null)}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function it(a,o){if(1&a){const e=t.RV6();t.j41(0,"mat-cell")(1,"mat-checkbox",49),t.bIt("click",function(i){return t.eBV(e),t.Njj(i.stopPropagation())})("change",function(i){const n=t.eBV(e).$implicit,r=t.XpG();return t.Njj(i?r.selection.toggle(n):null)}),t.k0s()()}if(2&a){const e=o.$implicit,s=t.XpG();t.R7$(),t.Y8G("checked",s.selection.isSelected(e))}}function st(a,o){1&a&&(t.j41(0,"mat-header-cell",50),t.EFF(1,"Id"),t.k0s())}function at(a,o){if(1&a&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(e._id)}}function nt(a,o){1&a&&(t.j41(0,"mat-header-cell",50),t.EFF(1,"Title"),t.k0s())}function ot(a,o){if(1&a&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(e.title)}}function lt(a,o){1&a&&(t.j41(0,"mat-header-cell",50),t.EFF(1,"Description"),t.k0s())}function rt(a,o){if(1&a&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(e.description)}}function ct(a,o){1&a&&(t.j41(0,"mat-header-cell",50),t.EFF(1," Status "),t.k0s())}function mt(a,o){if(1&a&&(t.j41(0,"div")(1,"span",53),t.EFF(2),t.k0s()()),2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.status,"")}}function dt(a,o){if(1&a&&(t.j41(0,"div")(1,"span",54),t.EFF(2),t.k0s()()),2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.status,"")}}function pt(a,o){if(1&a&&(t.j41(0,"div")(1,"span",55),t.EFF(2),t.k0s()()),2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.status,"")}}function ht(a,o){if(1&a&&(t.j41(0,"div")(1,"span",56),t.EFF(2),t.k0s()()),2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.status,"")}}function ut(a,o){if(1&a&&(t.j41(0,"mat-cell",51)(1,"span",52),t.EFF(2,"Status:"),t.k0s(),t.DNE(3,mt,3,1,"div")(4,dt,3,1,"div")(5,pt,3,1,"div")(6,ht,3,1,"div"),t.k0s()),2&a){const e=o.$implicit;t.R7$(3),t.vxM(3,"completed"===e.status?3:-1),t.R7$(),t.vxM(4,"canceled"===e.status?4:-1),t.R7$(),t.vxM(5,"pending"===e.status?5:-1),t.R7$(),t.vxM(6,"ongoing"===e.status?6:-1)}}function ft(a,o){1&a&&(t.j41(0,"mat-header-cell",50),t.EFF(1,"Start Date"),t.k0s())}function gt(a,o){if(1&a&&(t.j41(0,"mat-cell"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.startDate,"MM/dd/yyyy"))}}function _t(a,o){1&a&&(t.j41(0,"mat-header-cell",50),t.EFF(1,"End Date"),t.k0s())}function bt(a,o){if(1&a&&(t.j41(0,"mat-cell"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.endDate,"MM/dd/yyyy"))}}function Dt(a,o){1&a&&(t.j41(0,"mat-header-cell",57),t.EFF(1,"Actions"),t.k0s())}function kt(a,o){if(1&a){const e=t.RV6();t.j41(0,"mat-cell",57)(1,"button",58),t.bIt("click",function(i){return t.eBV(e),t.Njj(i.stopPropagation())})("click",function(){const i=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.editCall(i))}),t.nrm(2,"app-feather-icons",59),t.k0s(),t.j41(3,"button",60),t.bIt("click",function(i){return t.eBV(e),t.Njj(i.stopPropagation())})("click",function(){const i=t.eBV(e),n=i.$implicit,r=i.index,m=t.XpG();return t.Njj(m.deleteItem(r,n))}),t.nrm(4,"app-feather-icons",59),t.k0s(),t.j41(5,"button",61),t.bIt("click",function(){const i=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.route(i._id))}),t.nrm(6,"app-feather-icons",59),t.k0s()()}2&a&&(t.R7$(2),t.HbH("tbl-fav-edit"),t.Y8G("icon","edit"),t.R7$(2),t.HbH("tbl-fav-delete"),t.Y8G("icon","trash-2"),t.R7$(2),t.HbH("tbl-fav-delete"),t.Y8G("icon","plus-circle"))}function vt(a,o){1&a&&t.nrm(0,"mat-header-row")}function Ct(a,o){if(1&a){const e=t.RV6();t.j41(0,"mat-row",62),t.bIt("click",function(){const i=t.eBV(e).$implicit,n=t.XpG();return t.Njj(n.editCall(i))}),t.k0s()}2&a&&t.xc7("cursor","pointer")}function Ft(a,o){1&a&&t.nrm(0,"mat-spinner")}let Et=(()=>{class a extends _.U{constructor(e,s,i,n,r,m){super(),this.httpClient=e,this.CookieService=s,this.dialog=i,this.missionsService=n,this.snackBar=r,this.r=m,this.displayedColumns=["select","name","description","status","startDate","endDate","actions"],this.selection=new f.CB(!0,[]),this.contextMenuPosition={x:"0px",y:"0px"}}ngOnInit(){this.loadData(),this.missionsService.getTokenFromCookie()}route(e){this.r.navigate(["admin/mission/assignusertomission/"+e])}refresh(){this.loadData()}addNew(){let e;e="true"===localStorage.getItem("isRtl")?"rtl":"ltr";const s=this.dialog.open(B,{data:{missions:this.mission,action:"add"},direction:e});this.subs.sink=s.afterClosed().subscribe(i=>{1===i&&(this.exampleDatabase?.dataChange.value.unshift(this.missionsService.getDialogData()),this.refreshTable(),this.showNotification("snackbar-success","Add Record Successfully...!!!","bottom","center"))})}editCall(e){let s;this.id=e._id,s="true"===localStorage.getItem("isRtl")?"rtl":"ltr";const i=this.dialog.open(B,{data:{mission:e,id:e._id,action:"edit"},direction:s});this.subs.sink=i.afterClosed().subscribe(n=>{if(1===n){const r=this.exampleDatabase?.dataChange.value.findIndex(m=>m._id===this.id);void 0!==r&&void 0!==this.exampleDatabase&&(this.exampleDatabase.dataChange.value[r]=this.missionsService.getDialogData(),this.refreshTable(),this.showNotification("black","Edit Record Successfully...!!!","bottom","center"))}})}deleteItem(e,s){let i;this.index=e,this.id=s._id,i="true"===localStorage.getItem("isRtl")?"rtl":"ltr";const n=this.dialog.open(Q,{height:"270px",width:"300px",data:{id:s._id,title:s.title,description:s.description,status:s.status,startdate:s.startDate,enddate:s.endDate},direction:i});this.subs.sink=n.afterClosed().subscribe(r=>{if(1===r){const m=this.exampleDatabase?.dataChange.value.findIndex(T=>T._id===this.id);void 0!==m&&void 0!==this.exampleDatabase&&(this.exampleDatabase.dataChange.value.splice(m,1),this.refreshTable(),this.showNotification("snackbar-danger","Delete Record Successfully...!!!","bottom","center"))}})}refreshTable(){this.paginator._changePageSize(this.paginator.pageSize)}isAllSelected(){return this.selection.selected.length===this.dataSource.renderedData.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.renderedData.forEach(e=>this.selection.select(e))}removeSelectedRows(){let e;e=this.selection.selected.map(i=>i._id),e.length>0&&this.missionsService.deleteMultipleMissions(e).subscribe(()=>{this.selection.clear(),this.refreshTable()},i=>{console.error("Erreur lors de la suppression des missions:",i)})}loadData(){this.exampleDatabase=new x(this.httpClient,this.CookieService),this.dataSource=new xt(this.exampleDatabase,this.paginator,this.sort),this.subs.sink=(0,M.R)(this.filter.nativeElement,"keyup").subscribe(()=>{this.dataSource&&(this.dataSource.filter=this.filter.nativeElement.value)})}exportExcel(){const e=this.dataSource.filteredData.map(s=>({Title:s.title,Description:s.description,Status:s.status,"Start Date":(0,h.Yq)(new Date(s.startDate),"yyyy-MM-dd","en")||"","End Date":(0,h.Yq)(new Date(s.endDate),"yyyy-MM-dd","en")||""}));S.H.exportToExcel(e,"excel")}showNotification(e,s,i,n){this.snackBar.open(s,"",{duration:2e3,verticalPosition:i,horizontalPosition:n,panelClass:e})}onContextMenu(e,s){}static#t=this.\u0275fac=function(s){return new(s||a)(t.rXU(G.Qq),t.rXU(V.O),t.rXU(p.bZ),t.rXU(x),t.rXU(Z.UG),t.rXU(K.Ix))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-mymissions"]],viewQuery:function(s,i){if(1&s&&(t.GBs(j.iy,7),t.GBs(E.B4,7),t.GBs(W,7),t.GBs(u.Cp,5)),2&s){let n;t.mGM(n=t.lsd())&&(i.paginator=n.first),t.mGM(n=t.lsd())&&(i.sort=n.first),t.mGM(n=t.lsd())&&(i.filter=n.first),t.mGM(n=t.lsd())&&(i.contextMenu=n.first)}},standalone:!0,features:[t.Vt3,t.aNF],decls:71,vars:14,consts:[["filter",""],["paginator",""],[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field"],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","ADD",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","REFRESH",1,"m-l-10"],["matTooltip","DELETE",1,"m-l-10",3,"hidden"],["mat-mini-fab","","color","warn",3,"click"],["matTooltip","XLSX",1,"export-button","m-l-10"],["src","assets/images/icons/xlsx.png","alt","",3,"click"],[1,"body","overflow-auto"],[1,"responsive_table"],["mat-table","","matSort","",1,"mat-cell","advance-table",3,"dataSource"],["matColumnDef","select"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","status"],["mat-cell","",4,"matCellDef"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor","click",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],[3,"change","checked","indeterminate"],[3,"click","change","checked"],["mat-sort-header",""],["mat-cell",""],[1,"mobile-label"],[1,"badge","badge-pill","badge-primary","col-green"],[1,"badge","badge-pill","badge-primary","col-red"],[1,"badge","badge-pill","badge-primary","col-black"],[1,"badge","badge-pill","badge-primary","col-blue"],[1,"pr-0"],["mat-icon-button","","color","accent","matTooltip","Edit",1,"tbl-action-btn",3,"click"],[3,"icon"],["mat-icon-button","","color","accent","matTooltip","Delete",1,"tbl-action-btn",3,"click"],["mat-icon-button","","color","accent",1,"tbl-action-btn",3,"click"],["matRipple","",3,"click"]],template:function(s,i){if(1&s){const n=t.RV6();t.j41(0,"section",2)(1,"div",3)(2,"div",4),t.nrm(3,"app-breadcrumb",5),t.k0s(),t.j41(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"ul",11)(10,"li",12)(11,"h2"),t.EFF(12,"Missions"),t.k0s()(),t.j41(13,"li",13)(14,"label",14)(15,"i",15),t.EFF(16,"search"),t.k0s()(),t.nrm(17,"input",16,0),t.k0s()()(),t.j41(19,"div",17)(20,"ul",18)(21,"li",19)(22,"div",20)(23,"button",21),t.bIt("click",function(){return t.eBV(n),t.Njj(i.addNew())}),t.j41(24,"mat-icon",22),t.EFF(25,"add"),t.k0s()()()(),t.j41(26,"li",19)(27,"div",23)(28,"button",21),t.bIt("click",function(){return t.eBV(n),t.Njj(i.refresh())}),t.j41(29,"mat-icon",22),t.EFF(30,"refresh"),t.k0s()()()(),t.j41(31,"li",19)(32,"div",24)(33,"button",25),t.bIt("click",function(){return t.eBV(n),t.Njj(i.removeSelectedRows())}),t.j41(34,"mat-icon",22),t.EFF(35,"delete"),t.k0s()()()(),t.j41(36,"li")(37,"div",26)(38,"img",27),t.bIt("click",function(){return t.eBV(n),t.Njj(i.exportExcel())}),t.k0s()()()()()(),t.j41(39,"div",28)(40,"div",29)(41,"table",30),t.qex(42,31),t.DNE(43,et,2,2,"mat-header-cell",32)(44,it,2,1,"mat-cell",33),t.bVm(),t.qex(45,34),t.DNE(46,st,2,0,"mat-header-cell",35)(47,at,2,1,"mat-cell",33),t.bVm(),t.qex(48,36),t.DNE(49,nt,2,0,"mat-header-cell",35)(50,ot,2,1,"mat-cell",33),t.bVm(),t.qex(51,37),t.DNE(52,lt,2,0,"mat-header-cell",35)(53,rt,2,1,"mat-cell",33),t.bVm(),t.qex(54,38),t.DNE(55,ct,2,0,"mat-header-cell",35)(56,ut,7,4,"mat-cell",39),t.bVm(),t.qex(57,40),t.DNE(58,ft,2,0,"mat-header-cell",35)(59,gt,3,4,"mat-cell",33),t.bVm(),t.qex(60,41),t.DNE(61,_t,2,0,"mat-header-cell",35)(62,bt,3,4,"mat-cell",33),t.bVm(),t.qex(63,42),t.DNE(64,Dt,2,0,"mat-header-cell",43)(65,kt,7,9,"mat-cell",44),t.bVm(),t.DNE(66,vt,1,0,"mat-header-row",45)(67,Ct,1,2,"mat-row",46),t.k0s(),t.DNE(68,Ft,1,0,"mat-spinner"),t.k0s()()()(),t.nrm(69,"mat-paginator",47,1),t.k0s()()()}2&s&&(t.R7$(3),t.Y8G("title","All Missions")("items",t.lJ4(12,q))("active_item","All Missions"),t.R7$(29),t.Y8G("hidden",!i.selection.hasValue()),t.R7$(9),t.Y8G("dataSource",i.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.vxM(68,i.exampleDatabase?-1:68),t.R7$(),t.Y8G("length",i.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.lJ4(13,tt)))},dependencies:[H.D,N.uc,N.oV,g.Hl,g.iY,g.$0,R.m_,R.An,d.tP,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,E.NQ,E.B4,E.aE,I.g7,I.So,A.h,$.pZ,$.r6,F.D6,F.LG,u.Cn,j.Ou,j.iy,h.vh,h.MD]})}return a})();class xt extends f.qS{get filter(){return this.filterChange.value}set filter(o){this.filterChange.next(o)}constructor(o,e,s){super(),this.exampleDatabase=o,this.paginator=e,this._sort=s,this.filterChange=new v.t(""),this.filteredData=[],this.renderedData=[],this.filterChange.subscribe(()=>this.paginator.pageIndex=0)}connect(){const o=[this.exampleDatabase.dataChange,this._sort.sortChange,this.filterChange,this.paginator.page];return this.exampleDatabase.getAllMissions(),(0,C.h)(...o).pipe((0,b.T)(()=>{this.filteredData=this.exampleDatabase.data.slice().filter(i=>-1!==(i.title+i.description+i.status+i.startDate+i.endDate).toLowerCase().indexOf(this.filter.toLowerCase()));const e=this.sortData(this.filteredData.slice());return this.renderedData=e.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize),this.renderedData}))}disconnect(){}sortData(o){return this._sort.active&&""!==this._sort.direction?o.sort((e,s)=>{let i="",n="";switch(this._sort.active){case"id":i=e._id?e._id.toString():void 0,n=s._id?s._id.toString():void 0;break;case"name":[i,n]=[e.title,s.title];break;case"description":[i,n]=[e.description,s.description];break;case"status":[i,n]=[e.status,s.status];break;case"startDate":[i,n]=[e.startDate,s.startDate];break;case"endDate":[i,n]=[e.endDate,s.endDate]}if(void 0!==i&&void 0!==n){const r=isNaN(+i)?i:+i,m=isNaN(+n)?n:+n;return void 0===i||void 0===n?void 0===i?1:-1:(r<m?-1:1)*("asc"===this._sort.direction?1:-1)}return void 0===i?1:-1}):o}}const Tt=[{path:"missions",component:Et},{path:"**",component:l(12053).X}]},35780:(X,k,l)=>{l.d(k,{H:()=>v});var u=l(62288);class v{static exportToExcel(b,f){const{sheetName:_,fileName:S}=(C=>{const f=C||"ExportResult";return{sheetName:f,fileName:`${f}-${(new Date).toISOString()}`}})(f),h=u.Wp.book_new(),F=u.Wp.json_to_sheet(b);u.Wp.book_append_sheet(h,F,_),u._h(h,`${S}.xlsx`)}}}}]);