"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[654],{94654:(j,f,s)=>{s.r(f),s.d(f,{PAYMENTPOLICY_ROUTE:()=>N});var E=s(12053),P=s(8173),n=s(25596),p=s(60177),h=s(99213),d=s(88834),y=s(75351),r=s(89417),u=function(o){return o.SickLeave="Sick Leave",o.PaidLeave="paid leave",o.Unpaidleave="Unpaid leave",o.Bereavement="Bereavement",o.PersonalReasons="Personal Reasons",o.Maternity="Maternity",o.Paternity="Paternity",o.RTT="RTT",o.Other="Other",o}(u||{}),k=s(99631),F=s(32102),_=s(86600),v=s(21626),t=s(54438);const R=(o,m)=>({"fas fa-plus add-icon":o,"fas fa-pencil-alt edit-icon":m}),x=(o,m)=>({"red-text":o,"green-text":m});function C(o,m){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Tax Rate is required"),t.k0s())}function w(o,m){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Social Security Rate is required"),t.k0s())}function T(o,m){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Other Deductions is required"),t.k0s())}function O(o,m){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Value is required"),t.k0s())}function I(o,m){if(1&o){const e=t.RV6();t.j41(0,"div",12)(1,"mat-form-field",13)(2,"mat-label"),t.EFF(3),t.k0s(),t.j41(4,"input",29),t.bIt("input",function(a){const l=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.updateValue(a,l))}),t.k0s(),t.j41(5,"mat-icon",15),t.EFF(6,"Days"),t.k0s(),t.DNE(7,O,2,0,"mat-error",16),t.k0s()()}if(2&o){let e;const i=m.$implicit,a=t.XpG();t.R7$(3),t.JRh(i),t.R7$(),t.Y8G("formControlName",i),t.R7$(3),t.Y8G("ngIf",null==(e=a.PolicyForm.get(i))?null:e.hasError("required"))}}let D=(()=>{class o{constructor(e,i,a,l){this.dialogRef=e,this.data=i,this.fb=a,this.http=l,this.leaveTypes=Object.values(u),this.allowedDays=new Map,this.action=i.action,this.leads={},this.PolicyForm=this.createContactForm(),this.leaveTypes.forEach(c=>{this.allowedDays.set(c,this.leads.allowedDays?.get(c)||0)})}ngOnInit(){"EDIT"===this.action?(this.leads=this.data.policy,this.http.get(`https://backdeploy-7y83.onrender.com/payment-policy/get/${this.leads._id}`).subscribe(i=>{this.leads=i,this.populateForm()})):this.populateForm()}createContactForm(){return this.fb.group({taxRate:[this.leads.taxRate||"",r.k0.required],socialSecurityRate:[this.leads.socialSecurityRate||"",r.k0.required],otherDeductions:[this.leads.otherDeductions||"",r.k0.required],paymentDay:[this.leads.paymentDay||""],exessDayPay:[this.leads.exessDayPay||""],allowedDays:this.createAllowedDaysFormGroup()})}createAllowedDaysFormGroup(){const e={};return Object.values(u).forEach(i=>{const a=this.leads.allowedDays?.get(i)||0;e[i]=new r.MJ(a,r.k0.required)}),this.fb.group(e)}submit(){this.PolicyForm.valid&&(this.PolicyForm.value.allowedDays=this.allowedDays)}confirmAdd(){if(this.PolicyForm.valid){const e=this.PolicyForm.getRawValue(),i={};this.allowedDays.forEach((l,c)=>{i[c]=l});const a={...e,allowedDays:i};"ADD"===this.action?this.http.post("https://backdeploy-7y83.onrender.com/payment-policy",a).subscribe(l=>console.log("Payment Policy created successfully:",l),l=>console.error("Error while creating Payment Policy:",l)):"EDIT"===this.action&&this.http.put(`https://backdeploy-7y83.onrender.com/payment-policy/put/${this.leads._id}`,a).subscribe(c=>console.log("Payment Policy updated successfully:",c),c=>console.error("Error while updating Payment Policy:",c))}}populateForm(){this.PolicyForm.patchValue({taxRate:this.leads.taxRate,socialSecurityRate:this.leads.socialSecurityRate,otherDeductions:this.leads.otherDeductions,paymentDay:this.leads.paymentDay,exessDayPay:this.leads.exessDayPay})}createAllowedDaysPatchValue(){const e={};return this.leaveTypes.forEach(i=>{const a=this.leads.allowedDays?.get(i);e[i]=a}),e}onNoClick(){this.dialogRef.close()}updateValue(e,i){const a=e.target.value?parseFloat(e.target.value):0;this.allowedDays.set(i,a)}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(y.CP),t.rXU(y.Vh),t.rXU(r.ok),t.rXU(v.Qq))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-form-dialog",5,"i"]],standalone:!0,features:[t.aNF],decls:70,vars:16,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"font-icon"],[1,"icon-preview"],[3,"ngClass"],["mat-dialog-title",""],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[1,"register-form","m-4",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","taxRate","type","number","required",""],["matSuffix","",1,"material-icons-outlined","color-icon","p-3"],[4,"ngIf"],["matInput","","formControlName","socialSecurityRate","type","number","required",""],["matInput","","formControlName","otherDeductions","type","number","required",""],["matInput","","formControlName","paymentDay","type","number"],["matInput","","formControlName","exessDayPay","type","number"],[2,"display","flex","align-items","center"],[2,"flex-grow","1","height","1px","background-color","black"],[2,"margin","0 10px"],["class","col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2",4,"ngFor","ngForOf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["align","end",1,"example-button-row"],["mat-raised-button","","color","primary",3,"click","disabled","mat-dialog-close"],["mat-raised-button","","color","warn","tabindex","-1",3,"click"],["matInput","","type","number","placeholder","Enter value",3,"input","formControlName"]],template:function(i,a){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.nrm(6,"i",6),t.k0s()(),t.j41(7,"h1",7)(8,"span",6),t.EFF(9),t.k0s()()()(),t.j41(10,"button",8),t.bIt("click",function(){return a.dialogRef.close()}),t.j41(11,"mat-icon"),t.EFF(12,"close"),t.k0s()()(),t.j41(13,"div",9)(14,"form",10),t.bIt("ngSubmit",function(){return a.submit}),t.j41(15,"div",11)(16,"div",12)(17,"mat-form-field",13)(18,"mat-label"),t.EFF(19,"Tax Rate"),t.k0s(),t.nrm(20,"input",14),t.j41(21,"mat-icon",15),t.EFF(22,"attach_money"),t.k0s(),t.DNE(23,C,2,0,"mat-error",16),t.k0s()(),t.j41(24,"div",12)(25,"mat-form-field",13)(26,"mat-label"),t.EFF(27,"Social Security Rate"),t.k0s(),t.nrm(28,"input",17),t.j41(29,"mat-icon",15),t.EFF(30,"security"),t.k0s(),t.DNE(31,w,2,0,"mat-error",16),t.k0s()()(),t.j41(32,"div",11)(33,"div",12)(34,"mat-form-field",13)(35,"mat-label"),t.EFF(36,"Other Deductions"),t.k0s(),t.nrm(37,"input",18),t.j41(38,"mat-icon",15),t.EFF(39,"money_off"),t.k0s(),t.DNE(40,T,2,0,"mat-error",16),t.k0s()(),t.j41(41,"div",12)(42,"mat-form-field",13)(43,"mat-label"),t.EFF(44,"Payment Day"),t.k0s(),t.nrm(45,"input",19),t.j41(46,"mat-icon",15),t.EFF(47,"payment"),t.k0s()()()(),t.j41(48,"div",11)(49,"div",12)(50,"mat-form-field",13)(51,"mat-label"),t.EFF(52,"Excess Day Payment"),t.k0s(),t.nrm(53,"input",20),t.j41(54,"mat-icon",15),t.EFF(55,"attach_money"),t.k0s()()()(),t.j41(56,"div",21),t.nrm(57,"div",22),t.j41(58,"p",23),t.EFF(59,"Allowed Days"),t.k0s(),t.nrm(60,"div",22),t.k0s(),t.j41(61,"div",11),t.DNE(62,I,8,3,"div",24),t.k0s(),t.j41(63,"div",11)(64,"div",25)(65,"div",26)(66,"button",27),t.bIt("click",function(){return a.confirmAdd()}),t.EFF(67,"Save"),t.k0s(),t.j41(68,"button",28),t.bIt("click",function(){return a.onNoClick()}),t.EFF(69,"Cancel"),t.k0s()()()()()()()),2&i){let l,c,b;t.R7$(6),t.Y8G("ngClass",t.l_i(10,R,"ADD"===a.action,"EDIT"===a.action)),t.R7$(2),t.Y8G("ngClass",t.l_i(13,x,"EDIT"===a.action,"ADD"===a.action)),t.R7$(),t.SpI(" ","EDIT"===a.action?"Edit Policy":"Add Policy"," "),t.R7$(5),t.Y8G("formGroup",a.PolicyForm),t.R7$(9),t.Y8G("ngIf",null==(l=a.PolicyForm.get("taxRate"))?null:l.hasError("required")),t.R7$(8),t.Y8G("ngIf",null==(c=a.PolicyForm.get("socialSecurityRate"))?null:c.hasError("required")),t.R7$(9),t.Y8G("ngIf",null==(b=a.PolicyForm.get("otherDeductions"))?null:b.hasError("required")),t.R7$(22),t.Y8G("ngForOf",a.leaveTypes),t.R7$(4),t.Y8G("disabled",!a.PolicyForm.valid)("mat-dialog-close",1)}},dependencies:[d.Hl,d.$z,d.iY,h.m_,h.An,y.Yi,r.YN,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.X1,r.j4,r.JD,F.RG,F.rl,F.nJ,F.TL,F.yw,k.fS,k.fg,y.tx,_.Sy,v.q1,p.MD,p.YU,p.Sq,p.bT],styles:[".green-icon[_ngcontent-%COMP%]{color:#054905}.red-text[_ngcontent-%COMP%]{color:#5f0505}.green-text[_ngcontent-%COMP%]{color:#024502}.add-icon[_ngcontent-%COMP%]{color:#044604}.edit-icon[_ngcontent-%COMP%]{color:#5f0202}"]})}return o})();const $=()=>["Payment Policy "];function M(o,m){if(1&o&&(t.qex(0),t.j41(1,"li"),t.EFF(2),t.k0s(),t.bVm()),2&o){const e=m.$implicit;t.R7$(2),t.Lme("",e.key,": ",e.value,"")}}function S(o,m){if(1&o&&(t.j41(0,"tr")(1,"td",27),t.EFF(2),t.k0s(),t.j41(3,"td",27),t.EFF(4),t.k0s(),t.j41(5,"td",27),t.EFF(6),t.k0s(),t.j41(7,"td",27),t.EFF(8),t.k0s(),t.j41(9,"td",27),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"ul"),t.DNE(13,M,3,2,"ng-container",23),t.nI1(14,"keyvalue"),t.k0s()()()),2&o){const e=m.$implicit;t.R7$(2),t.JRh(e.taxRate),t.R7$(2),t.JRh(e.socialSecurityRate),t.R7$(2),t.JRh(e.otherDeductions),t.R7$(2),t.JRh(e.paymentDay),t.R7$(2),t.JRh(e.exessDayPay),t.R7$(3),t.Y8G("ngForOf",t.bMT(14,6,e.allowedDays))}}const N=[{path:"paymentPolicy",component:(()=>{class o{constructor(e,i){this.http=e,this.dialog=i,this.paymentPolicies=[]}ngOnInit(){this.fetchPaymentPolicies()}fetchPaymentPolicies(){this.http.get("https://backdeploy-7y83.onrender.com/payment-policy").subscribe(e=>{this.paymentPolicies=e},e=>{console.error("Une erreur s'est produite lors de la r\xe9cup\xe9ration des politiques de paiement : ",e)})}addNew(){this.dialog.open(D,{data:{action:"ADD"}})}edit(){this.paymentPolicies&&this.paymentPolicies.length>0?this.dialog.open(D,{data:{_id:this.paymentPolicies[0]._id,action:"EDIT",policy:this.paymentPolicies[0]}}):console.error("No payment policies available for editing.")}refresh(){this.fetchPaymentPolicies(),console.log("Fonction refresh() appel\xe9e")}removeSelectedRows(){console.log("Fonction removeSelectedRows() appel\xe9e")}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(v.Qq),t.rXU(y.bZ))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-payment-policy"]],standalone:!0,features:[t.aNF],decls:114,vars:5,consts:[["content",""],[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","ADD",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","EDIT",1,"m-l-10"],["matTooltip","REFRESH",1,"m-l-10"],[1,"body"],[1,"container"],[1,"table"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-wrap","wrap","gap","20px"],[2,"border","2px solid #234161","padding","20px","border-radius","5px","width","300px"],[2,"color","#234161"],[1,"bold","center"]],template:function(i,a){if(1&i){const l=t.RV6();t.j41(0,"section",1)(1,"div",2)(2,"div",3),t.nrm(3,"app-breadcrumb",4),t.k0s(),t.j41(4,"div",null,0)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"ul",10)(12,"li",11),t.nrm(13,"h2"),t.k0s()()(),t.j41(14,"div",12)(15,"ul",13)(16,"li",14)(17,"div",15)(18,"button",16),t.bIt("click",function(){return t.eBV(l),t.Njj(a.addNew())}),t.j41(19,"mat-icon",17),t.EFF(20,"add"),t.k0s()()()(),t.j41(21,"li",14)(22,"div",18)(23,"button",16),t.bIt("click",function(){return t.eBV(l),t.Njj(a.edit())}),t.j41(24,"mat-icon",17),t.EFF(25,"edit"),t.k0s()()()(),t.j41(26,"li",14)(27,"div",19)(28,"button",16),t.bIt("click",function(){return t.eBV(l),t.Njj(a.refresh())}),t.j41(29,"mat-icon",17),t.EFF(30,"refresh"),t.k0s()()()()()()(),t.j41(31,"div",20)(32,"div",21)(33,"h2"),t.EFF(34,"Payment Policy"),t.k0s(),t.j41(35,"table",22)(36,"thead")(37,"tr")(38,"th"),t.EFF(39,"Tax Rate (%)"),t.k0s(),t.j41(40,"th"),t.EFF(41,"Social Security Rate (%)"),t.k0s(),t.j41(42,"th"),t.EFF(43,"Other Deductions (dinars)"),t.k0s(),t.j41(44,"th"),t.EFF(45,"Payment Day"),t.k0s(),t.j41(46,"th"),t.EFF(47,"Excess Day Payment"),t.k0s(),t.j41(48,"th"),t.EFF(49,"Allowed Days"),t.k0s()()(),t.j41(50,"tbody"),t.DNE(51,S,15,8,"tr",23),t.k0s()()()()()()(),t.j41(52,"div",24)(53,"div",25)(54,"h3",26),t.EFF(55,"Tax Rate (%)"),t.k0s(),t.j41(56,"p"),t.EFF(57,"Percentage of gross salary deducted as income tax."),t.k0s(),t.j41(58,"p"),t.EFF(59,"Example: 14% of 1000 dinars = 140 dinars of tax."),t.k0s()(),t.j41(60,"div",25)(61,"h3",26),t.EFF(62,"Social Security Rate (%)"),t.k0s(),t.j41(63,"p"),t.EFF(64,"Percentage of gross salary deducted as social security contribution."),t.k0s(),t.j41(65,"p"),t.EFF(66,"Finances healthcare, family allowances, etc."),t.k0s(),t.j41(67,"p"),t.EFF(68,"Example: 14% of 1000 dinars = 140 dinars of contribution."),t.k0s()(),t.j41(69,"div",25)(70,"h3",26),t.EFF(71,"Other Deductions (dinars)"),t.k0s(),t.j41(72,"p"),t.EFF(73,"Fixed amount of deductions not tied to percentages."),t.k0s(),t.j41(74,"p"),t.EFF(75,"Includes union dues, loan repayments, etc."),t.k0s(),t.j41(76,"p"),t.EFF(77,"Example: 150 dinars deducted in addition to percentages."),t.k0s()(),t.j41(78,"div",25)(79,"h3",26),t.EFF(80,"Payment Day"),t.k0s(),t.j41(81,"p"),t.EFF(82,"Day when salaries are paid to employees."),t.k0s(),t.j41(83,"p"),t.EFF(84,"Example: Payment on the 22nd of each month."),t.k0s()(),t.j41(85,"div",25)(86,"h3",26),t.EFF(87,"Excess Day Payment"),t.k0s(),t.j41(88,"p"),t.EFF(89,"Payment per day for excess leave days."),t.k0s(),t.j41(90,"p"),t.EFF(91,"Example: 5 % per excess day."),t.k0s()(),t.j41(92,"div",25)(93,"h3",26),t.EFF(94,"Allowed Days"),t.k0s(),t.j41(95,"p"),t.EFF(96,"Number of days allowed for each type of leave."),t.k0s(),t.j41(97,"p"),t.EFF(98,":"),t.k0s(),t.j41(99,"ul")(100,"li"),t.EFF(101,"Bereavement: Leave for family death."),t.k0s(),t.j41(102,"li"),t.EFF(103,"Maternity: Maternity leave."),t.k0s(),t.j41(104,"li"),t.EFF(105,"Paternity: Paternity leave."),t.k0s(),t.j41(106,"li"),t.EFF(107,"RTT: Compensatory rest days."),t.k0s(),t.j41(108,"li"),t.EFF(109,"Sick Leave: Sick leave."),t.k0s(),t.j41(110,"li"),t.EFF(111,"Unpaid leave: Leave without pay."),t.k0s(),t.j41(112,"li"),t.EFF(113,"Paid leave: Standard paid leave."),t.k0s()()()()()()()}2&i&&(t.R7$(3),t.Y8G("title","")("items",t.lJ4(4,$))("active_item","Payments Policies"),t.R7$(48),t.Y8G("ngForOf",a.paymentPolicies))},dependencies:[P.D,n.Hu,p.MD,p.Sq,p.lG,h.m_,h.An,d.Hl,d.$0],styles:['@charset "UTF-8";.title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.section-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}.policy-card[_ngcontent-%COMP%]{margin-bottom:20px}.policy-item[_ngcontent-%COMP%]{margin-bottom:10px}.policy-card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000ff1a}.allowed-days-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000ff1a;margin-top:10px}.blue-text[_ngcontent-%COMP%]{color:navy;font-weight:700}.policy-card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000ff1a;margin-bottom:20px;max-width:100%}.blue-text[_ngcontent-%COMP%]{color:navy}.black-bold[_ngcontent-%COMP%]{color:#000;font-weight:700}.bold[_ngcontent-%COMP%]{font-weight:700}.center[_ngcontent-%COMP%]{text-align:center}']})}return o})()},{path:"**",component:E.X}]},8173:(j,f,s)=>{s.d(f,{D:()=>h});var E=s(67949),P=s(74710),n=s(54438);function p(d,y){if(1&d&&(n.j41(0,"li",9),n.EFF(1),n.k0s()),2&d){const r=y.$implicit;n.R7$(),n.JRh(r)}}let h=(()=>{class d{constructor(){}static#t=this.\u0275fac=function(u){return new(u||d)};static#e=this.\u0275cmp=n.VBU({type:d,selectors:[["app-breadcrumb"]],inputs:{title:"title",items:"items",active_item:"active_item"},standalone:!0,features:[n.aNF],decls:15,vars:6,consts:[[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"page-title"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],[3,"routerLink"],[3,"icon"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"]],template:function(u,g){1&u&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),n.EFF(5),n.k0s()()(),n.j41(6,"div",2)(7,"ul",5)(8,"li",6)(9,"a",7),n.nrm(10,"app-feather-icons",8),n.k0s()(),n.Z7z(11,p,2,1,"li",9,n.fX1),n.j41(13,"li",10),n.EFF(14),n.k0s()()()()()),2&u&&(n.R7$(5),n.JRh(g.title),n.R7$(4),n.Y8G("routerLink","/admin/dashboard/main"),n.R7$(),n.HbH("breadcrumb-icon"),n.Y8G("icon","home"),n.R7$(),n.Dyx(g.items),n.R7$(3),n.JRh(g.active_item))},dependencies:[P.Wk,E.h]})}return d})()}}]);